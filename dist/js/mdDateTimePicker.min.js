!function(e,t){if("function"==typeof define&&define.amd)define(["exports","moment"],t);else if("undefined"!=typeof exports)t(exports,require("moment"));else{var i={exports:{}};t(i.exports,e.moment),e.mdDateTimePicker=i.exports}}(this,function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(e){return e&&e.__esModule?e:{default:e}}(t),a=function(){function e(e,t){for(var i,s=0;s<t.length;s++)i=t[s],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),d=function(){function e(t){var a=t.type,d=t.init,l=void 0===d?(0,s.default)():d,o=t.past,n=void 0===o?(0,s.default)().subtract(1,"years"):o,c=t.future,r=void 0===c?(0,s.default)().add(21,"years"):c,_=t.mode,h=void 0!==_&&_,m=t.orientation,u=void 0===m?"LANDSCAPE":m,p=t.trigger,g=void 0===p?"":p,v=t.now,D=void 0===v?"now":v,f=t.ok,k=void 0===f?"ok":f,C=t.cancel,L=void 0===C?"cancel":C,y=t.colon,w=void 0===y||y,b=t.autoClose,E=void 0!==b&&b,I=t.inner24,M=void 0!==I&&I,T=t.prevHandle,x=void 0===T?'<div class="mddtp-prev-handle"></div>':T,A=t.nextHandle,V=void 0===A?'<div class="mddtp-next-handle"></div>':A;i(this,e),this._type=a,this._init=l,this._past=n,this._future=r,this._mode=h,this._orientation=u,this._trigger=g,this._now=D,this._ok=k,this._cancel=L,this._colon=w,this._autoClose=E,this._inner24=M,this._prevHandle=x,this._nextHandle=V,this._sDialog={},"undefined"==typeof document||document.getElementById("mddtp-picker__"+this._type)||this._buildDialog()}return a(e,[{key:"hide",value:function(){this._selectDialog(),this._hideDialog()}},{key:"show",value:function(){this._selectDialog(),"date"===this._type?this._initDateDialog(this._init):"time"===this._type&&this._initTimeDialog(this._init),this._showDialog()}},{key:"isOpen",value:function(){return this._selectDialog(),!!e.dialog.state}},{key:"isClosed",value:function(){return this._selectDialog(),!e.dialog.state}},{key:"toggle",value:function(){this._selectDialog(),e.dialog.state?this.hide():this.show()}},{key:"_selectDialog",value:function(){this._sDialog.picker=document.getElementById("mddtp-picker__"+[this._type]);for(var e=["viewHolder","years","header","now","cancel","ok","left","right","previous","current","next","subtitle","title","titleDay","titleMonth","AM","PM","hneedle","mneedle","hourView","minuteView","hour","minute","fakeNeedle","circularHolder","circle","dotSpan"],t=e.length;t--;)this._sDialog[e[t]]=document.getElementById("mddtp-"+this._type+"__"+e[t]);this._sDialog.tDate=this._init.clone(),this._sDialog.sDate=this._init.clone()}},{key:"_showDialog",value:function(){var t=this;e.dialog.state=!0,this._sDialog.picker.classList.remove("mddtp-picker--inactive"),this._sDialog.picker.classList.add("zoomIn"),"PORTRAIT"===this._orientation&&this._sDialog.picker.classList.add("mddtp-picker--portrait"),setTimeout(function(){t._sDialog.picker.classList.remove("zoomIn")},300)}},{key:"_hideDialog",value:function(){var t=this,i=this._sDialog.years,s=t._sDialog.title,a=t._sDialog.subtitle,d=this._sDialog.viewHolder,l=this._sDialog.AM,o=this._sDialog.PM,n=this._sDialog.minute,c=this._sDialog.hour,r=this._sDialog.minuteView,_=this._sDialog.hourView,h=this._sDialog.picker,m=this._sDialog.hneedle,u=this._sDialog.mneedle,p=this._sDialog.dotSpan,g="mddtp-picker__color--active",v="mddtp-picker__circularView--hidden";e.dialog.state=!1,e.dialog.view=!0,this._sDialog.picker.classList.add("zoomOut"),"date"===this._type?(i.classList.remove("zoomIn","zoomOut"),i.classList.add("mddtp-picker__years--invisible"),s.classList.remove(g),a.classList.add(g),d.classList.remove("zoomOut")):(l.classList.remove(g),o.classList.remove(g),n.classList.remove(g),c.classList.add(g),r.classList.add(v),_.classList.remove(v),a.setAttribute("style","display: none"),p.setAttribute("style","display: none"),m.className="mddtp-picker__selection",u.className="mddtp-picker__selection"),setTimeout(function(){t._sDialog.picker.classList.remove("mddtp-picker--portrait"),t._sDialog.picker.classList.remove("zoomOut"),t._sDialog.picker.classList.add("mddtp-picker--inactive");var e=h.cloneNode(!0);h.parentNode.replaceChild(e,h)},300)}},{key:"_buildDialog",value:function(){var e=this._type,t=document.createDocumentFragment(),i=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),o=document.createElement("button"),n=document.createElement("button");if(i.id="mddtp-picker__"+e,i.classList.add("mddtp-picker"),i.classList.add("mddtp-picker-"+e),i.classList.add("mddtp-picker--inactive"),i.classList.add("animated"),this._addId(a,"header"),this._addClass(a,"header"),i.appendChild(a),this._addClass(d,"body"),d.appendChild(l),i.appendChild(d),"date"===this._type){var c=document.createElement("button"),r=document.createElement("div"),_=document.createElement("div"),h=document.createElement("div"),m=document.createElement("div"),u=document.createElement("div"),p=document.createElement("ul"),g=document.createElement("li"),v=document.createElement("li"),D=document.createElement("li"),f=document.createElement("button"),k=document.createElement("button"),C=document.createElement("ul");this._addId(r,"subtitle"),this._addClass(r,"subtitle"),this._addId(_,"title"),this._addClass(_,"title",["mddtp-picker__color--active"]),this._addId(h,"titleDay"),this._addId(m,"titleMonth"),_.appendChild(h),_.appendChild(m),a.appendChild(_),a.appendChild(r),this._addId(u,"viewHolder"),this._addClass(u,"viewHolder",["animated"]),this._addClass(p,"views"),this._addId(g,"previous"),g.classList.add("mddtp-picker__view"),this._addId(v,"current"),v.classList.add("mddtp-picker__view"),this._addId(D,"next"),D.classList.add("mddtp-picker__view"),this._addView(g),this._addView(v),this._addView(D),u.appendChild(p),p.appendChild(g),p.appendChild(v),p.appendChild(D),this._addId(f,"left"),f.classList.add("mddtp-button"),this._addClass(f,"left"),f.setAttribute("type","button"),f.innerHTML=this._prevHandle,this._addId(k,"right"),k.classList.add("mddtp-button"),this._addClass(k,"right"),k.setAttribute("type","button"),k.innerHTML=this._nextHandle,this._addId(C,"years"),this._addClass(C,"years",["mddtp-picker__years--invisible","animated"]),d.appendChild(u),d.appendChild(f),d.appendChild(k),d.appendChild(C),this._addId(c,"now"),c.classList.add("mddtp-button"),c.setAttribute("type","button"),l.appendChild(c)}else{var L=document.createElement("div"),y=document.createElement("span"),w=document.createElement("span"),b=document.createElement("span"),E=document.createElement("div"),I=document.createElement("div"),M=document.createElement("div"),T=document.createElement("div"),x=document.createElement("div"),A=document.createElement("div"),V=document.createElement("span"),H=document.createElement("span"),N=document.createElement("span"),P=document.createElement("span"),B=document.createElement("div"),Y=document.createElement("div"),z=document.createElement("div");this._addId(L,"title"),this._addClass(L,"title"),this._addId(y,"hour"),y.classList.add("mddtp-picker__color--active"),w.textContent=":",this._addId(w,"dotSpan"),w.setAttribute("style","display: none"),this._addId(b,"minute"),this._addId(E,"subtitle"),this._addClass(E,"subtitle"),E.setAttribute("style","display: none"),this._addId(I,"AM"),I.textContent=(0,s.default)().localeData().meridiem(1,1,!0),this._addId(M,"PM"),M.textContent=(0,s.default)().localeData().meridiem(13,1,!0),L.appendChild(y),L.appendChild(w),L.appendChild(b),E.appendChild(I),E.appendChild(M),a.appendChild(L),a.appendChild(E),this._addId(T,"circularHolder"),this._addClass(T,"circularHolder"),this._addClass(T,"circularHolder__hour"),this._addId(x,"hneedle"),this._addId(A,"mneedle"),x.classList.add("mddtp-picker__selection"),A.classList.add("mddtp-picker__selection"),this._addClass(V,"line"),this._addId(H,"circle"),this._addClass(H,"circle"),this._addClass(N,"line"),this._addId(P,"circle"),this._addClass(P,"circle"),this._addId(B,"minuteView"),B.classList.add("mddtp-picker__circularView"),B.classList.add("mddtp-picker__circularView--hidden"),this._addId(Y,"fakeNeedle"),Y.classList.add("mddtp-picker__circle--fake"),this._addId(z,"hourView"),z.classList.add("mddtp-picker__circularView"),x.appendChild(V),x.appendChild(H),A.appendChild(N),A.appendChild(P),T.appendChild(x),T.appendChild(A),T.appendChild(B),T.appendChild(Y),T.appendChild(z),d.appendChild(T)}l.classList.add("mddtp-picker__action"),!0===this._autoClose&&(l.style.display="none"),this._addId(o,"cancel"),o.classList.add("mddtp-button"),o.setAttribute("type","button"),this._addId(n,"ok"),n.classList.add("mddtp-button"),n.setAttribute("type","button"),l.appendChild(o),l.appendChild(n),d.appendChild(l),t.appendChild(i),document.getElementsByTagName("body").item(0).appendChild(t)}},{key:"_setHourActive",value:function(){this._sDialog.hneedle.classList.add("mddtp-picker__active"),console.log("_setHourActive",this._sDialog.hneedle),console.log(this._sDialog.hneedle.classList)}},{key:"_toggleHourMinute",value:function(){console.log("_toggleHourMinute (1)"),console.log(this._sDialog.hneedle),console.log(this._sDialog.mneedle),console.log(this._sDialog.hneedle.classList),console.log(this._sDialog.mneedle.classList),console.log(this._sDialog.hneedle.classList.contains("mddtp-picker__active")),this._sDialog.hneedle.classList.toggle("mddtp-picker__active"),this._sDialog.mneedle.classList.toggle("mddtp-picker__active"),console.log("_toggleHourMinute (2)"),console.log(this._sDialog.hneedle),console.log(this._sDialog.mneedle),console.log(this._sDialog.hneedle.classList),console.log(this._sDialog.mneedle.classList),console.log(this._sDialog.hneedle.classList.contains("mddtp-picker__active"))}},{key:"_initTimeDialog",value:function(e){console.log("_initTimeDialog");var t=this._sDialog.hour,i=this._sDialog.minute,s=this._sDialog.subtitle,a=this._sDialog.dotSpan;if(this._setHourActive(),this._mode){var d=parseInt(e.format("H"),10);0===d&&(d="00"),this._fillText(t,d),this._colon&&a.removeAttribute("style")}else this._fillText(t,e.format("h")),e._locale.isPM(e.format("A"))?this._sDialog.PM.classList.add("mddtp-picker__color--active"):this._sDialog.AM.classList.add("mddtp-picker__color--active"),s.removeAttribute("style"),a.removeAttribute("style");this._fillText(i,e.format("mm")),this._initHour(),this._initMinute(),this._attachEventHandlers(),this._changeM(),this._switchToView(t),this._switchToView(i),this._addClockEvent(),this._setButtonText()}},{key:"_initHour",value:function(){var e=this._sDialog.hourView,t=this._sDialog.hneedle,i="mddtp-hour__selected",s="mddtp-picker__cell--selected",a="mddtp-picker__cell--rotate-",d="mddtp-picker__cell",l=document.createDocumentFragment(),o=void 0;if(console.log("_initHour this._mode",this._mode),this._mode){var n=!0===this._inner24?10:5;o=parseInt(this._sDialog.tDate.format("H"),10);for(var c=1,r=n;c<=24;c++,r+=n){var _=document.createElement("div"),h=document.createElement("span");_.classList.add(d),h.textContent=24===c?"00":c;var m=r;!0===this._inner24&&c>12&&(m-=120,_.classList.add("mddtp-picker__cell--rotate24")),_.classList.add(a+m),o===c&&(_.id=i,_.classList.add(s),t.classList.add(a+m)),24===c&&0===o&&(_.id=i,_.classList.add(s),t.classList.add(a+m)),_.appendChild(h),l.appendChild(_)}}else{o=parseInt(this._sDialog.tDate.format("h"),10);for(var u=1,p=10;u<=12;u++,p+=10){var g=document.createElement("div"),v=document.createElement("span");g.classList.add(d),v.textContent=u,g.classList.add(a+p),o===u&&(g.id=i,g.classList.add(s),t.classList.add(a+p)),g.appendChild(v),l.appendChild(g)}}for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(l)}},{key:"_initMinute",value:function(){console.log("_initMinute");for(var e=this._sDialog.minuteView,t=parseInt(this._sDialog.tDate.format("m"),10),i=this._sDialog.mneedle,s=document.createDocumentFragment(),a=5,d=10;a<=60;a+=5,d+=10){var l=document.createElement("div"),o=document.createElement("span");l.classList.add("mddtp-picker__cell"),o.textContent=60===a?this._numWithZero(0):this._numWithZero(a),0===t&&(t=60),l.classList.add("mddtp-picker__cell--rotate-"+d),(t===a||t-1===a||t+1===a||1===t&&60===a)&&(l.id="mddtp-minute__selected",l.classList.add("mddtp-picker__cell--selected")),l.appendChild(o),s.appendChild(l)}for(;e.lastChild;)e.removeChild(e.lastChild);var n,c;n=60,c=parseInt(this._sDialog.tDate.format("m"),10);var r=this._calcRotation(n,parseInt(c,10));console.log("spoke",n),console.log("value",c),console.log("rotationClass",r),r&&i.classList.add(r),e.appendChild(s)}},{key:"_initDateDialog",value:function(e){var t=this._sDialog.subtitle,i=this._sDialog.title,s=this._sDialog.titleDay,a=this._sDialog.titleMonth;this._fillText(t,e.format("YYYY")),this._fillText(s,e.format("ddd")),this._fillText(a,e.format("MMM D")),this._initYear(),this._initViewHolder(),this._attachEventHandlers(),this._changeMonth(),this._switchToView(t),this._switchToView(i),this._setButtonText()}},{key:"_initViewHolder",value:function(){var e=this._sDialog.tDate,t=this._sDialog.current,i=this._sDialog.previous,a=this._sDialog.next,d=this._past,l=this._future;e.isBefore(d,"month")&&(e=d.clone()),e.isAfter(l,"month")&&(e=l.clone()),this._sDialog.tDate=e,this._initMonth(t,e),this._initMonth(a,(0,s.default)(this._getMonth(e,1))),this._initMonth(i,(0,s.default)(this._getMonth(e,-1))),this._toMoveMonth()}},{key:"_initMonth",value:function(e,t){var i=t.format("MMMM YYYY"),a=e.getElementsByTagName("div");this._fillText(a[0],i);var d=document.createDocumentFragment(),l=a[3],o=s.default.weekdays(!0).indexOf(s.default.weekdays(!1,(0,s.default)(t).date(1).day())),n=-1,c=-1,r=parseInt((0,s.default)(t).endOf("month").format("D"),10)+o-1,_=o,h="mddtp-picker__cell",m=r;(0,s.default)().isSame(t,"month")&&(n=parseInt((0,s.default)().format("D"),10),n+=o-1),this._past.isSame(t,"month")&&(_=parseInt(this._past.format("D"),10),_+=o-1),this._future.isSame(t,"month")&&(m=parseInt(this._future.format("D"),10),m+=o-1),this._sDialog.sDate.isSame(t,"month")&&(c=parseInt((0,s.default)(this._sDialog.sDate).format("D"),10),c+=o-1);for(var u=0;u<42;u++){var p=document.createElement("span"),g=u-o+1;u>=o&&u<=r&&(u>m||u<_?p.classList.add(h+"--disabled"):p.classList.add(h),this._fillText(p,g)),n===u&&(p.classList.add(h+"--today"),this.todaycell=p),c===u&&(p.classList.add(h+"--selected"),p.id="mddtp-date__selected"),d.appendChild(p)}for(;l.lastChild;)l.removeChild(l.lastChild);l.appendChild(d),this._addCellClickEvent(l,this)}},{key:"_initYear",value:function(){for(var e=this._sDialog.years,t=this._sDialog.tDate.year(),i=document.createDocumentFragment(),s=this._past.year(),a=this._future.year(),d=s;d<=a;d++){var l=document.createElement("li");l.textContent=d,d===t&&(l.id="mddtp-date__currentYear",l.classList.add("mddtp-picker__li--current")),i.appendChild(l)}for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(i),this._changeYear(e)}},{key:"_removeRotation",value:function(e){e.classList.forEach(function(t){/rotate/.test(t)&&e.classList.remove(t)})}},{key:"_pointNeedle",value:function(t){var i=60,s=void 0,a=this._sDialog.circle,d=this._sDialog.fakeNeedle,l=this._sDialog.circularHolder,o=e.dialog.view?t._sDialog.hneedle:t._sDialog.mneedle;t._removeRotation(o),console.log("_pointNeedle, mdDateTimePicker.dialog.view",e.dialog.view),console.log("_pointNeedle, me._mode",t._mode),e.dialog.view?t._mode?(i=24,0===(s=parseInt(t._sDialog.sDate.format("H"),10))&&(s=24)):(i=12,s=t._sDialog.sDate.format("h")):(s=t._sDialog.sDate.format("m"),!0!==t._autoClose&&setTimeout(function(){var e=l.getBoundingClientRect(),t=a.getBoundingClientRect();d.setAttribute("style","left:"+(t.left-e.left)+"px;top:"+(t.top-e.top)+"px")},300));var n=t._calcRotation(i,parseInt(s,10));console.log("spoke",i),console.log("rotationClass",n),n&&o.classList.add(n)}},{key:"_switchToView",value:function(e){var t=this;console.log("_switchToView... ",e,this._type,this._inner24,t._mode),"date"===this._type?e.onclick=function(){t._switchToDateView(e,t)}:(!0===this._inner24&&t._mode&&(parseInt(t._sDialog.sDate.format("H"),10)>12?(t._sDialog.hneedle.classList.add("mddtp-picker__cell--rotate24"),t._sDialog.mneedle.classList.add("mddtp-picker__cell--rotate24")):(t._sDialog.hneedle.classList.remove("mddtp-picker__cell--rotate24"),t._sDialog.mneedle.classList.remove("mddtp-picker__cell--rotate24"))),e.onclick=function(){t._switchToTimeView(t)})}},{key:"_switchToTimeView",value:function(t){var i=t._sDialog.hourView,s=t._sDialog.minuteView,a=t._sDialog.hour,d=t._sDialog.minute,l="mddtp-picker__circularView--hidden";i.classList.toggle(l),s.classList.toggle(l),a.classList.toggle("mddtp-picker__color--active"),d.classList.toggle("mddtp-picker__color--active"),e.dialog.view=!e.dialog.view,console.log("_switchToTimeView, mdDateTimePicker.dialog.view",e.dialog.view),t._toggleHourMinute(),t._pointNeedle(t)}},{key:"_switchToDateView",value:function(t,i){t.setAttribute("disabled","");var s=i._sDialog.viewHolder,a=i._sDialog.years,d=i._sDialog.title,l=i._sDialog.subtitle,o=document.getElementById("mddtp-date__currentYear");e.dialog.view?(s.classList.add("zoomOut"),a.classList.remove("mddtp-picker__years--invisible"),a.classList.add("zoomIn"),o.scrollIntoViewIfNeeded&&o.scrollIntoViewIfNeeded()):(a.classList.add("zoomOut"),s.classList.remove("zoomOut"),s.classList.add("zoomIn"),setTimeout(function(){a.classList.remove("zoomIn","zoomOut"),a.classList.add("mddtp-picker__years--invisible"),s.classList.remove("zoomIn")},300)),d.classList.toggle("mddtp-picker__color--active"),l.classList.toggle("mddtp-picker__color--active"),e.dialog.view=!e.dialog.view,console.log("_switchToDateView, mdDateTimePicker.dialog.view",e.dialog.view),setTimeout(function(){t.removeAttribute("disabled")},300)}},{key:"_addClockEvent",value:function(){var e=this,t=this._sDialog.hourView,i=this._sDialog.minuteView,s="mddtp-picker__cell--selected";t.onclick=function(t){console.log("hourView.onclick");var i="mddtp-hour__selected",a=document.getElementById(i),d=0;t.target&&"SPAN"===t.target.nodeName&&(a.id="",a.classList.remove(s),t.target.parentNode.classList.add(s),t.target.parentNode.id=i,d=e._mode?parseInt(t.target.textContent,10):"AM"===e._sDialog.sDate.format("A")?t.target.textContent:parseInt(t.target.textContent,10)+12,e._sDialog.sDate.hour(d),e._sDialog.hour.textContent=t.target.textContent,e._pointNeedle(e),setTimeout(function(){e._switchToTimeView(e)},700))},i.onclick=function(t){console.log("minuteView.onclick");var i="mddtp-minute__selected",a=document.getElementById(i),d=0;t.target&&"SPAN"===t.target.nodeName&&(a&&(a.id="",a.classList.remove(s)),t.target.parentNode.classList.add(s),t.target.parentNode.id=i,d=t.target.textContent,e._sDialog.sDate.minute(d),e._sDialog.minute.textContent=d,e._pointNeedle(e),!0===e._autoClose&&e._sDialog.ok.onclick())}}},{key:"_cellClicked",value:function(e,t){if(e.target&&"SPAN"===e.target.nodeName&&e.target.classList.contains("mddtp-picker__cell")){var i=e.target.textContent;t=t||this._sDialog.tDate.date(i);var s="mddtp-date__selected",a="mddtp-picker__cell--selected",d=document.getElementById(s),l=this._sDialog.subtitle,o=this._sDialog.titleDay,n=this._sDialog.titleMonth;d&&(d.classList.remove(a),d.id=""),e.target.classList.add(a),e.target.id=s,this._sDialog.sDate=t.clone(),this._fillText(l,t.year()),this._fillText(o,t.format("ddd")),this._fillText(n,t.format("MMM D")),!0===this._autoClose&&this._sDialog.ok.onclick()}}},{key:"_addCellClickEvent",value:function(e,t){e.onclick=this._cellClicked.bind(t)}},{key:"_toMoveMonth",value:function(){var e=this._sDialog.tDate,t=this._sDialog.left,i=this._sDialog.right,s=this._past,a=this._future;t.removeAttribute("disabled"),i.removeAttribute("disabled"),t.classList.remove("mddtp-button--disabled"),i.classList.remove("mddtp-button--disabled"),e.isSame(s,"month")&&(t.setAttribute("disabled",""),t.classList.add("mddtp-button--disabled")),e.isSame(a,"month")&&(i.setAttribute("disabled",""),i.classList.add("mddtp-button--disabled"))}},{key:"_changeMonth",value:function(){function e(e,d){var l=!1,o=t._sDialog.next,n=t._sDialog.current,c=t._sDialog.previous;i.setAttribute("disabled",""),s.setAttribute("disabled",""),n.classList.add(e),c.classList.add(e),o.classList.add(e);var r=d.cloneNode(!0),_=void 0;d===o?(_=c,n.parentNode.appendChild(r),o.id=n.id,n.id=c.id,c=n,n=o,o=r):(l=!0,_=o,c.id=n.id,n.id=o.id,o=n,n=c),setTimeout(function(){d===c&&(n.parentNode.insertBefore(r,n),c=r),t._sDialog.next=o,t._sDialog.current=n,t._sDialog.previous=c,n.classList.add(a),o.classList.add(a),c.classList.add(a),n.classList.remove(e),o.classList.remove(e),c.classList.remove(e),_.parentNode.removeChild(_)},300),setTimeout(function(){n.classList.remove(a),o.classList.remove(a),c.classList.remove(a),t._sDialog.tDate=l?t._getMonth(t._sDialog.tDate,-1):t._getMonth(t._sDialog.tDate,1),t._initViewHolder()},350),setTimeout(function(){i.classList.contains("mddtp-button--disabled")||i.removeAttribute("disabled"),s.classList.contains("mddtp-button--disabled")||s.removeAttribute("disabled")},400)}var t=this,i=this._sDialog.left,s=this._sDialog.right,a="mddtp-picker__view--pause";i.onclick=function(){e("mddtp-picker__view--right",t._sDialog.previous)},s.onclick=function(){e("mddtp-picker__view--left",t._sDialog.next)}}},{key:"_changeYear",value:function(e){var t=this;e.onclick=function(i){if(i.target&&"LI"===i.target.nodeName){var s=document.getElementById("mddtp-date__currentYear");s.id="",s.classList.remove("mddtp-picker__li--current"),i.target.id="mddtp-date__currentYear",i.target.classList.add("mddtp-picker__li--current"),t._switchToDateView(e,t),t._sDialog.tDate.year(parseInt(i.target.textContent,10)),t._initViewHolder()}}}},{key:"_changeM",value:function(){var e=this,t=this._sDialog.AM,i=this._sDialog.PM;t.onclick=function(){var s="AM";e._sDialog.sDate._locale.isPM(e._sDialog.sDate.format("A"))&&(s="PM"),"PM"===s&&(e._sDialog.sDate.subtract(12,"h"),t.classList.toggle("mddtp-picker__color--active"),i.classList.toggle("mddtp-picker__color--active"))},i.onclick=function(){var s="AM";e._sDialog.sDate._locale.isPM(e._sDialog.sDate.format("A"))&&(s="PM"),"AM"===s&&(e._sDialog.sDate.add(12,"h"),t.classList.toggle("mddtp-picker__color--active"),i.classList.toggle("mddtp-picker__color--active"))}}},{key:"_dragDial",value:function(){var e=(this._sDialog.needle,this._sDialog.circle,this._sDialog.fakeNeedle,this._sDialog.circularHolder);this._sDialog.minute,e.getBoundingClientRect()}},{key:"_attachEventHandlers",value:function(){var e=this,t=this._sDialog.now,i=this._sDialog.ok,a=this._sDialog.cancel,d=new CustomEvent("onCancel"),l=new CustomEvent("onOk");console.log("now",t),t&&(t.onclick=function(i){function a(){d=e._sDialog.tDate.diff(e._sDialog.sDate,"days"),(l=e._sDialog.tDate.isSame(e._sDialog.sDate,"month"))||(d>0?e._sDialog.left.click():e._sDialog.right.click(),setTimeout(a,500))}e._cellClicked({target:e.todaycell},(0,s.default)()),t.blur();var d,l;setTimeout(a,0)}),a.onclick=function(){e.toggle(),e._trigger&&e._trigger.dispatchEvent(d)},i.onclick=function(){e._init=e._sDialog.sDate,e.toggle(),e._trigger&&e._trigger.dispatchEvent(l)}}},{key:"_setButtonText",value:function(){this._sDialog.now&&(this._sDialog.now.textContent=this._now),this._sDialog.cancel.textContent=this._cancel,this._sDialog.ok.textContent=this._ok}},{key:"_getMonth",value:function(e,t){var i=void 0;return i=e.clone(),t>0?i.add(Math.abs(t),"M"):i.subtract(Math.abs(t),"M")}},{key:"_nearestDivisor",value:function(e,t){return e%t==0?e:(e-1)%t==0?e-1:(e+1)%t==0?e+1:-1}},{key:"_numWithZero",value:function(e){return e>9?""+e:"0"+e}},{key:"_fillText",value:function(e,t){e.firstChild?e.firstChild.nodeValue=t:e.appendChild(document.createTextNode(t))}},{key:"_addId",value:function(e,t){e.id="mddtp-"+this._type+"__"+t}},{key:"_addClass",value:function(e,t,i){e.classList.add("mddtp-picker__"+t);var s=0;for(i&&(s=i.length,i.reverse());s--;)e.classList.add(i[s])}},{key:"_addView",value:function(e){for(var t=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),l=s.default.weekdaysMin(!0).reverse(),o=7;o--;){var n=document.createElement("span");n.textContent=l[o],a.appendChild(n)}this._addClass(t,"month"),this._addClass(i,"grid"),this._addClass(a,"th"),this._addClass(d,"tr"),e.appendChild(t),e.appendChild(i),i.appendChild(a),i.appendChild(d)}},{key:"_calcRotation",value:function(e,t){return t*=12===e?10:24===e?5:2,60===e&&0===t&&(t=120),"mddtp-picker__cell--rotate-"+t}},{key:"time",get:function(){return this._init},set:function(e){e&&(this._init=e)}},{key:"trigger",get:function(){return this._trigger},set:function(e){e&&(this._trigger=e)}}],[{key:"dialog",get:function(){return e._dialog},set:function(t){e._dialog=t}}]),e}();d._dialog={view:!0,state:!1},e.default=d});